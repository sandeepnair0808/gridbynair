function drawLayout(feederConfig){
  ctx.setTransform(1,0,0,1,0,0); ctx.clearRect(0,0,canvas.width,canvas.height); busCoords=[];
  // Main buses
  const baseY = 100, sx = 180, sy = 100, startX = 900 - ((feederConfig.length-1)/2)*sx;
  busCoords.push({name:'POI BUS', x:900, y:baseY, padWidth:20, padHeight:0});
  busCoords.push({name:'GSU HV BUS', x:900, y:baseY+80, padWidth:20, padHeight:0});
  busCoords.push({name:'SUB-MV BUS', x:900, y:baseY+160, padWidth:20, padHeight:0});
  ctx.save();
  ctx.fillStyle = "#0a66c2";
  ctx.beginPath();ctx.arc(900,baseY,10,0,2*Math.PI);ctx.fill();ctx.fillText("POI BUS",915,baseY+5);
  ctx.beginPath();ctx.arc(900,baseY+80,10,0,2*Math.PI);ctx.fill();ctx.fillText("GSU HV BUS",915,baseY+85);
  ctx.beginPath();ctx.arc(900,baseY+160,10,0,2*Math.PI);ctx.fill();ctx.fillText("SUB-MV BUS",915,baseY+165);
  ctx.restore();

  let invCounter = 0;
  for(let f=0; f<feederConfig.length; f++){
    const nInv = feederConfig[f];
    const colX = startX + f*sx;
    let prevY = baseY+160;
    for(let j=0;j<nInv;j++){
      const mvY = baseY+260 + j*sy;
      let invName = `INV${1001+invCounter}`;
      let lvY = mvY+30;
      let padY = lvY+30;

      // Draw line: SUB-MV -> MV bus, MV->LV, LV->Padmount
      ctx.save();
      ctx.beginPath(); ctx.moveTo(colX, prevY); ctx.lineTo(colX, mvY); ctx.strokeStyle='#aaa'; ctx.lineWidth=3; ctx.stroke(); // Feeder
      ctx.beginPath(); ctx.moveTo(colX, mvY); ctx.lineTo(colX, lvY); ctx.strokeStyle='#00c'; ctx.lineWidth=2; ctx.stroke(); // MV-LV
      ctx.beginPath(); ctx.moveTo(colX, lvY); ctx.lineTo(colX, padY); ctx.strokeStyle='#0a66c2'; ctx.lineWidth=2; ctx.stroke(); // LV-Pad
      ctx.restore();

      // MV bus
      ctx.save();
      ctx.beginPath(); ctx.arc(colX, mvY, 8, 0, 2*Math.PI);
      ctx.fillStyle = 'red'; ctx.fill(); ctx.fillStyle = '#000';
      ctx.fillText(invName, colX+15, mvY+5);
      ctx.restore();
      busCoords.push({name:invName, x:colX, y:mvY, padWidth:10, padHeight:0});

      // LV bus
      let lvBusName = invName+"_LV";
      ctx.save();
      ctx.beginPath(); ctx.arc(colX, lvY, 6, 0, 2*Math.PI);
      ctx.fillStyle = 'blue'; ctx.fill(); ctx.fillText(lvBusName, colX+12, lvY+5);
      ctx.restore();
      busCoords.push({name:lvBusName, x:colX, y:lvY, padWidth:8, padHeight:0});

      // Padmount
      ctx.save();
      ctx.fillStyle='#2ecc71';
      ctx.fillRect(colX-8, padY-8, 16, 16);
      ctx.fillStyle='#000'; ctx.fillText('PAD', colX+12, padY+5);
      ctx.restore();

      prevY = padY;
      invCounter++;
    }
  }
}
