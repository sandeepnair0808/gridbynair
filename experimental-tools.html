function drawLayout(feederConfig){
  ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);
  busCoords=[];
  // Draw fixed buses
  const baseY = 100, sx = 180, sy = 100, startX = 900 - ((feederConfig.length-1)/2)*sx;
  busCoords.push({name:'POI BUS', x:900, y:baseY, padWidth:20, padHeight:0});
  busCoords.push({name:'GSU HV BUS', x:900, y:baseY+80, padWidth:20, padHeight:0});
  busCoords.push({name:'SUB-MV BUS', x:900, y:baseY+160, padWidth:20, padHeight:0});

  // Draw feeders and inverters in columns
  let invCounter = 0;
  for(let f=0; f<feederConfig.length; f++){
    const nInv = feederConfig[f];
    const colX = startX + f*sx;
    let prevBus = {x:colX, y:baseY+160, name:'SUB-MV BUS'}; // connect from SUB-MV

    for(let j=0;j<nInv;j++){
      const invY = baseY+260 + j*sy;
      let invName = `INV${1001+invCounter}`;
      // Add MV bus
      busCoords.push({name:invName, x:colX, y:invY, padWidth:10, padHeight:0});
      // Draw a line from previous bus to this one
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(prevBus.x, prevBus.y);
      ctx.lineTo(colX, invY);
      ctx.strokeStyle = '#aaa'; ctx.lineWidth = 3; ctx.stroke();
      ctx.restore();
      // Draw bus
      ctx.save();
      ctx.beginPath();
      ctx.arc(colX, invY, 8, 0, 2*Math.PI);
      ctx.fillStyle = 'red'; ctx.fill();
      ctx.fillStyle = '#000';
      ctx.fillText(invName, colX+15, invY+5);
      ctx.restore();
      prevBus = {x:colX, y:invY, name:invName};
      invCounter++;
    }
  }
}
